{"version":3,"file":"/server/views/serverFile.coffee.js","sources":["serverFile.coffee"],"names":[],"mappings":";AAEA,CAAO,EAAQ,GAAT,CAAN,EAAe;CACb;GAAQ,EAAR,EAAQ;CAAR,CACA,CAAa,QAAb;CACQ,IAAN,IAAM,EAAN;CACE;GAAW,EAAY,CAAvB;GACW,GAAX;CACC,CAAgB,EAAjB,KAAkB,IAAlB;CACC;GAAiB,KAAjB;GACoB,GAAgB,CADpC,CACA;CADA,EAEiB,EAAK,GAAtB;CAA4B,CAAS,IAAR,QAAD;EAAgC,GAAP,IAAzB,CAAyB;CAAkB,IAAtD;CAFjB,EAGA,IAAO,CAAP;CACA,GAAI,EAAM,CAAN,CAAJ;CAAmB,CAAS,IAAR,QAAD;CAAf,IAA4C,CAAc,CAAN,GAApD;CAAmE,CAAS,IAAR,QAAD;CAAf,IAA4C,CAApG,IAAwD;CACvD,EAAqB,CAAjB,EAA4B,CAAN,GAA1B,IAAI;CAAqC,CAAS,IAAR,QAAD;CAAyB,QAAlE,GAA0B;CACzB,EAAY,EAAK,IAAjB;CAAuB,CAAS,IAAR;CAAD,CAAgC,GAAP,IAAzB,KAAyB;EAAmB,YAAvD;CAAuD,CAAO,EAAN;CAAM,CAAS,IAAR;eAAR;CAAoB,IAA3E;CAAZ,EACkB,CAAI,CAAJ,CAAW,MAA7B,EAAkB,CAAlB;CADA,EAEW,CAFX,CAEW,GAAX,CAAqB,GAArB,GAAqB;CACf,GAAN,CAAK,cAAL;CACE;EACM,EAAN,uBADA;EAES,KAAT,QAFA;EAGM,CAAW,CAAjB,IAAM,MAAN,cAHA;CALH,aAIC;WALF;SALgB;CAAjB,MAAiB;CAHnB,IAAM;CADI,CAoBT,CApBU,KAAb;CAsBO,KAAD,CAAN;CAAe,CAA0B,EAA1B,KAA0B,eAA1B;CACP,IAAK,CAAN,OAAN;CACE,CAAK,CAAL,CAAM,EAAN;EAEA,MAHF;CAGE,CACE,EADF;CACE,CAAqB,EAArB;SADF;CAJsC,OACxC;CADc,IAA0B;CAxB5B,GAwBb;CAxBa;A","sourcesContent":["\n\nMeteor.startup ->\n  Fiber = Npm.require(\"fibers\")\n  setInterval (->\n    Fiber(->\n      allUsers = Meteor.users.find().fetch()\n      userData = undefined\n      _.each allUsers, (userData) ->\n\t      userIDFromLoop = userData._id\n\t      userEmailFromLoop = userData.emails[0].address\n\t      emailNoteCount = Notes.find({userID: userIDFromLoop, email: \"checked\"}).count()\n\t      console.log userEmailFromLoop\n\t      if (Emails.findOne({userID: userIDFromLoop}) != null && Emails.findOne({userID: userIDFromLoop}) != undefined)\n\t\t      if (emailNoteCount > 0 && Emails.findOne({userID: userIDFromLoop}).emailUser)\n\t\t      \temailNote = Notes.find({userID: userIDFromLoop, email: \"checked\"}, {sort: {folder: 1}}).fetch()\n\t\t      \trandomNoteIndex = Math.floor(Math.random() * emailNoteCount)\n\t\t      \ttextSend = emailNote[randomNoteIndex].folder + \" - \" + emailNote[randomNoteIndex].section + \" - \" + emailNote[randomNoteIndex].note\n\t\t      \tEmail.send\n\t\t        \tto: userEmailFromLoop\n\t\t        \tfrom: \"yournote@remembernote.com\"\n\t\t        \tsubject: \"Remember Note\"\n\t\t        \ttext: textSend + \"\\n\\n\\nwww.remembernote.com\"\n\t    ).run()\n  ), 43200000\n\n  Meteor.methods update_emailVerification: ->\n\t  Meteor.users.update\n\t    _id: @userId\n\t  ,\n\t    $set:\n\t      \"emails.0.verified\": true\n"]}