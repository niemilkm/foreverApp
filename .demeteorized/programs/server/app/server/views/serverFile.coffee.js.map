{"version":3,"file":"/server/views/serverFile.coffee.js","sources":["serverFile.coffee"],"names":[],"mappings":";AAEA,CAAO,EAAQ,GAAT,CAAN,EAAe;CACb;GAAQ,EAAR,EAAQ;CACI,EAAC,MAAb;CACQ,IAAN,IAAM,EAAN;CACE;GAAW,EAAY,CAAvB;GACW,GAAX;CACC,CAAgB,EAAjB,KAAkB,IAAlB;CACC;GAAiB,KAAjB;GACoB,GAAgB,CADpC,CACA;CADA,EAEiB,EAAK,GAAtB;CAA4B,CAAS,IAAR,QAAD;EAA+B,EAA/B,CAAyB;CAAY,IAAhD;CAFjB,EAGA,IAAO,CAAP;CACA,EAAqB,CAAjB,EAA4B,CAAN,CAA1B,MAAI;CAAqC,CAAS,IAAR,QAAD;CAAyB,QAAlE,CAA0B;CACzB,EAAY,EAAK,IAAjB;CAAuB,CAAS,IAAR,QAAD;EAA+B,EAA/B,CAAyB;EAAa,UAAjD;CAAiD,CAAO,EAAN;CAAM,CAAS,IAAR;aAAR;CAAoB,IAArE;CAAZ,EACkB,CAAI,CAAJ,CAAW,IAA7B,IAAkB,CAAlB;CADA,EAEW,CAFX,CAEW,GAAX,CAAqB,CAArB,KAAqB;CACf,GAAN,CAAK,YAAL;CACE;EACM,EAAN,aADA;EAES,KAAT,QAFA;EAGM,EAAN,IAHA,IAGA;CARH,WAIC;SATe;CAAjB,MAAiB;CAHnB,IAAM;CADI,CAmBT,CAnBU,KAAb;CAFa;A","sourcesContent":["\n\nMeteor.startup ->\n  Fiber = Npm.require(\"fibers\")\n  setInterval (->\n    Fiber(->\n      allUsers = Meteor.users.find().fetch()\n      userData = undefined\n      _.each allUsers, (userData) ->\n\t      userIDFromLoop = userData._id\n\t      userEmailFromLoop = userData.emails[0].address\n\t      emailNoteCount = Notes.find({userID: userIDFromLoop, email:true}).count()\n\t      console.log userEmailFromLoop\n\t      if (emailNoteCount > 0 && Emails.findOne({userID: userIDFromLoop}).emailUser)\n\t      \temailNote = Notes.find({userID: userIDFromLoop, email:true}, {sort: {folder: 1}}).fetch()\n\t      \trandomNoteIndex = Math.floor(Math.random() * emailNoteCount)\n\t      \ttextSend = emailNote[randomNoteIndex].folder + \" - \" + emailNote[randomNoteIndex].section + \" - \" + emailNote[randomNoteIndex].note\n\t      \tEmail.send\n\t        \tto: userEmailFromLoop\n\t        \tfrom: userEmailFromLoop\n\t        \tsubject: \"Remember Note\"\n\t        \ttext: textSend\n\t    ).run()\n  ), 43200000\n"]}